---
import type { CollectionEntry } from "astro:content";

import { render } from "astro:content";
import { Image } from "astro:assets";

import ArticleHeader from '../components/ui/ArticleHeader.astro';
import ArticleIndex from '../components/ArticleIndex.astro';

type Props = {
  entry: CollectionEntry<'blog'>;
  prevArticle?: CollectionEntry<'blog'>;
  nextArticle?: CollectionEntry<'blog'>;
};

const { entry, prevArticle, nextArticle } = Astro.props;
const { title, pubDate, tags, heroImage } = entry.data;
const { headings } = await render(entry);
const { id } = entry;

---

<article>
  <ArticleHeader id={id} pubDate={pubDate} tags={tags} title={title} />
  {heroImage && (
    <div class="w-full rounded-xl overflow-hidden" transition:name={`hero-image-${id}`}>
      <Image width={1080} height={540} src={heroImage as any} alt={title} class="w-full h-auto" />
    </div>
  )}
  <ArticleIndex headings={headings} />
<slot />
</article>
<hr />
<div class="suggestArticle">
  <div class="prevNextArticle">
    {(prevArticle === undefined)
      ? undefined
      : <p>前の記事</p><a href={`/blog/${prevArticle.id}`}>{prevArticle.data.title}</a>
    }
  </div>
  <div class="prevNextArticle">
    {(nextArticle === undefined)
      ? undefined
      : <p>次の記事</p><a href={`/blog/${nextArticle.id}`}>{nextArticle.data.title}</a>
    }
  </div>
</div>

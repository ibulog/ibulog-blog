---
import { HEADING_LEVEL } from '../config';

export interface Props {
	headings: Array<{
		depth: number;
		slug: string;
		text: string;
	}>;
	id?: string;
}

const { headings, id } = Astro.props;

const filteredHeadings = headings.filter(heading => heading.depth <= HEADING_LEVEL);
---

{filteredHeadings.length > 0 && (
	<div id={id} class="flex flex-col gap-2.5 px-6 py-6 rounded-xl bg-app-bg w-full">
		<div class="flex flex-row items-center gap-2.5 self-stretch">
			<h2 class="text-lg font-bold text-app-text">
				Index
			</h2>
		</div>
		<div class="flex flex-col gap-2.5 self-stretch pt-3 px-3">
			{filteredHeadings.map((heading) => (
				<div class="flex flex-row items-center self-stretch py-2.5 last:pb-0">
					<a
						href={`#${heading.slug}`}
						class="text-base font-medium text-app-text-subtle no-underline hover:underline"
					>
						{heading.text}
					</a>
				</div>
			))}
		</div>
	</div>
)}


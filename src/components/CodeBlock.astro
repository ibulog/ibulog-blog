---
import { Code } from "astro:components";
import { type BuiltinLanguage, type SpecialLanguage } from "shiki";
import {
  transformerNotationDiff,
  transformerMetaHighlight,
  transformerNotationFocus,
} from "@shikijs/transformers";
interface Props {
  lang?: string;
  title?: string;
  code: string;
}
const { lang, title, code } = Astro.props;
---

<figure class="code-block">
  <div class="code-block-header-wrapper">
    <figcaption class="code-block-header">
      {title ? title : "code"}
    </figcaption>
  </div>
  <div>
    <Code
      lang={lang as BuiltinLanguage | SpecialLanguage | undefined}
      code={decodeURIComponent(code)}
      wrap={false}
      theme={"dark-plus"}
      transformers={[
        transformerNotationDiff(),
        transformerMetaHighlight(),
        transformerNotationFocus(),
      ]}
    />
  </div>
</figure>

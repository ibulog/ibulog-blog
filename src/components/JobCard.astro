---
import LinkCard from './ui/LinkCard.astro';
import getFormatDay from '../utils/getFormatDay';

export interface Props {
	companyName: string;
	startDate: string;
	endDate?: string;
	companyUrl: string;
	team: string;
	work: string;
	isFirst?: boolean;
}

const { companyName, startDate, endDate, companyUrl, team, work, isFirst = false } = Astro.props;
const formattedStartDate = getFormatDay(new Date(startDate));
const formattedEndDate = endDate ? getFormatDay(new Date(endDate)) : null;
const dateRange = endDate ? `${formattedStartDate} - ${formattedEndDate}` : `${formattedStartDate} - Present`;
---

<div class="flex flex-row items-center gap-2 w-full">
	<div class="flex flex-col self-stretch gap-2.5 pt-8">
		<div class="relative z-10 flex flex-col justify-center items-center w-8 h-8 rounded-full bg-primary">
			<div class="flex flex-col justify-center items-center w-full h-full p-1 rounded-full border border-app-border-default-reverse">
				<div class={`flex flex-col justify-center items-center w-full h-full p-2 rounded-full ${isFirst ? "bg-accent" : "bg-app-bg-obvious"}`}></div>
			</div>
		</div>
	</div>
	<div class="flex flex-col gap-2 flex-1">
		<LinkCard title={companyName} description={dateRange} url={companyUrl} />
		<div class="flex flex-row self-stretch px-6 py-4">
			<h3 class="text-base font-bold leading-none text-app-text">
				Team
			</h3>
		</div>
		<div class="flex flex-row items-center self-stretch flex-wrap px-8">
			<p class="text-base font-normal leading-[1.8em] text-app-text">
				{team}
			</p>
		</div>
		<div class="flex flex-row self-stretch px-6 py-4">
			<h3 class="text-base font-bold leading-none text-app-text">
				Work
			</h3>
		</div>
		<div class="flex flex-row items-center self-stretch flex-wrap px-8">
			<p class="text-base font-normal leading-[1.8em] text-app-text whitespace-pre-line">
				{work}
			</p>
		</div>
	</div>
</div>

